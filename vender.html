<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vender Produto</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: url('https://down-br.img.susercontent.com/file/sg-11134201-7ra3f-m50llz0oztw74f') no-repeat center center fixed;
    background-size: cover;
    backdrop-filter: blur(8px);
}

/* Bot√µes topo */
#back-btn, #minha-conta-btn {
    position: fixed;
    top: 20px;
    padding: 10px 16px;
    background: #003366;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    z-index: 1000;
}
#back-btn { left: 20px; }
#minha-conta-btn { right: 20px; display: none; }

#aviso-rapido {
    display: none;
    max-width: 800px;
    margin: 120px auto;
    padding: 20px;
    background: rgba(255,200,200,0.9);
    border-radius: 16px;
    text-align: center;
    border: 2px solid #ff0000;
}

.create-product-container {
    max-width: 800px;
    margin: 120px auto 40px auto;
    padding: 20px;
    background: rgba(255,255,255,0.92);
    border-radius: 16px;
    border: 2px solid #004080;
}

.create-product-container input,
.create-product-container textarea,
.create-product-container button {
    width: 100%;
    margin: 8px 0;
    padding: 12px;
    border-radius: 8px;
    border: 2px solid #003366;
}

.create-product-container button {
    background: #003366;
    color: white;
    font-weight: bold;
}

.products {
    display: flex;
    flex-wrap: wrap;
    gap: 28px;
}

.product {
    background: #f8fbff;
    border-radius: 14px;
    padding: 20px;
    border: 2px solid #003366;
    width: 365px;
}

.product-name {
    background: #003d80;
    color: white;
    padding: 8px;
    border-radius: 8px;
    text-align: center;
    font-weight: bold;
}

.price {
    font-weight: bold;
    font-size: 18px;
    color: #003366;
}

.old-price {
    text-decoration: line-through;
    color: #999;
}

.delete-btn {
    margin-top: 10px;
    width: 100%;
    padding: 10px;
    background: #cc0000;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
}

/* Popup conta */
#conta-popup {
    display:none;
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.6);
    backdrop-filter: blur(6px);
    justify-content:center;
    align-items:center;
    z-index:9999;
}
#conta-box {
    background:white;
    padding:20px;
    border-radius:14px;
    width:360px;
    text-align:center;
    border:3px solid #003366;
}
</style>
</head>

<body>

<button id="back-btn">‚Üê Voltar</button>
<button id="minha-conta-btn">üë§ Minha Conta</button>

<div id="aviso-rapido">
    <h2>Aten√ß√£o</h2>
    <p>Login r√°pido n√£o pode adicionar produtos.</p>
</div>

<div class="create-product-container">
    <h2>Adicionar Produto</h2>
    <form id="product-form">
        <input id="product-name" placeholder="Nome" required>
        <textarea id="product-desc" placeholder="Descri√ß√£o" required></textarea>
        <input id="product-price" type="number" step="0.01" placeholder="Pre√ßo" required>
        <input id="product-discount" type="number" step="0.01" placeholder="Desconto (%)">
        <input id="product-image" type="file" accept="image/*">
        <button type="submit">Adicionar Produto</button>
    </form>
</div>

<div class="my-products">
    <h2 style="text-align:center;">Meus Produtos</h2>
    <div id="products-list" class="products"></div>
</div>

<!-- Popup Minha Conta -->
<div id="conta-popup">
    <div id="conta-box">
        <h3>Minha Conta</h3>
        <p><strong>Nome:</strong> <span id="mc-nome"></span></p>
        <p><strong>Telefone:</strong> <span id="mc-telefone"></span></p>
        <p><strong>Senha:</strong> <span id="mc-senha"></span></p>
        <button onclick="document.getElementById('conta-popup').style.display='none'"
            style="margin-top:12px; padding:10px; width:100%; background:#002b55; color:white; border:none; border-radius:8px;">
            Fechar
        </button>
    </div>
</div>

<script>
const STORAGE_KEY = "meusProdutos";

/* üîô Voltar */
document.getElementById("back-btn").onclick = () => {
    window.location.href = "resultado.html";
};

/* üîê Login + Minha Conta */
const tipoLogin = localStorage.getItem("tipoLogin");
const aviso = document.getElementById("aviso-rapido");
const formBox = document.querySelector(".create-product-container");
const btnConta = document.getElementById("minha-conta-btn");
const popupConta = document.getElementById("conta-popup");

if (tipoLogin === "completo") {
    btnConta.style.display = "block";

    btnConta.onclick = () => {
        document.getElementById("mc-nome").textContent =
            localStorage.getItem("accountName") || "‚Äî";
        document.getElementById("mc-telefone").textContent =
            localStorage.getItem("accountPhone") || "‚Äî";
        document.getElementById("mc-senha").textContent =
            localStorage.getItem("accountPass") || "‚Äî";

        popupConta.style.display = "flex";
    };
} else {
    formBox.style.display = "none";
    aviso.style.display = "block";
}

/* üíæ Carregar produtos */
function carregarProdutos() {
    const produtos = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    const lista = document.getElementById("products-list");
    lista.innerHTML = "";
    produtos.forEach((p, i) => renderProduto(p, i));
}

/* üß± Render */
function renderProduto(produto, index) {
    const div = document.createElement("div");
    div.className = "product";
    div.innerHTML = `
        <div class="product-name">${produto.nome}</div>
        <img src="${produto.imagem}" style="width:100%; border-radius:12px;">
        <p>${produto.desc}</p>
        ${produto.desconto > 0 ? `<p class="old-price">R$ ${produto.preco}</p>` : ""}
        <p class="price">R$ ${produto.final}</p>
        <button class="delete-btn">Excluir Produto</button>
    `;
    div.querySelector(".delete-btn").onclick = () => excluirProduto(index);
    document.getElementById("products-list").appendChild(div);
}

/* ‚ûï Adicionar */
document.getElementById("product-form").onsubmit = e => {
    e.preventDefault();

    const nome = product-name.value;
    const desc = product-desc.value;
    const preco = parseFloat(product-price.value);
    const desconto = parseFloat(product-discount.value || 0);
    const imgFile = product-image.files[0];

    const reader = new FileReader();
    reader.onload = () => {
        const produto = {
            nome,
            desc,
            preco: preco.toFixed(2),
            desconto,
            final: (preco - preco * desconto / 100).toFixed(2),
            imagem: reader.result || "https://via.placeholder.com/365x200"
        };

        const lista = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
        lista.push(produto);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(lista));
        carregarProdutos();
        e.target.reset();
    };

    imgFile ? reader.readAsDataURL(imgFile) : reader.onload();
};

/* üóëÔ∏è Excluir */
function excluirProduto(index) {
    const lista = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    lista.splice(index, 1);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(lista));
    carregarProdutos();
}

carregarProdutos();
</script>

</body>
</html>
